function e(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var t=e((function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}})),n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,a,u=s(e),c=1;c<arguments.length;c++){for(var l in i=Object(arguments[c]))r.call(i,l)&&(u[l]=i[l]);if(n){a=n(i);for(var f=0;f<a.length;f++)o.call(i,a[f])&&(u[a[f]]=i[a[f]])}}return u},a=e((function(e,t){t.__esModule=!0,t.default=function(e,t){void 0===t&&(t={});return new Promise((function(n,r){var o,s=t,i=s.async,a=void 0===i||i,u=s.data,c=void 0===u?null:u,l=s.headers,f=void 0===l?{}:l,p=s.method,d=void 0===p?"get":p,h=s.timeout,v=void 0===h?0:h,y=s.onprogress,g=new XMLHttpRequest;v&&(o=setTimeout((function(){r(new Error("the request timeout "+v+"ms"))}),v)),g.onerror=function(){r(new Error("unknown error"))},g.upload&&(g.upload.onprogress=y),g.onreadystatechange=function(){if(4===g.readyState)if(v&&clearTimeout(o),g.status>=200&&g.status<300)n(g.response,g);else{var e=new Error("the request is error");r(e)}},g.open(d,e,a),Object.keys(f).forEach((function(e){g.setRequestHeader(e,f[e])}));try{g.send(c)}catch(e){r(e)}}))}})),u=e((function(e){var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],s=0;s<4;s++)8*r+6*s<=8*e.length?n.push(t.charAt(o>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(r))>>>6-2*o);return n}},e.exports=n})),c={utf8:{stringToBytes:function(e){return c.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(c.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},l=c,f=function(e){return null!=e&&(p(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&p(e.slice(0,0))}(e)||!!e._isBuffer)};function p(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}for(var d=e((function(e){var t,n,r,o,s;t=u,n=l.utf8,r=f,o=l.bin,(s=function(e,i){e.constructor==String?e=i&&"binary"===i.encoding?o.stringToBytes(e):n.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var a=t.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,f=-1732584194,p=271733878,d=0;d<a.length;d++)a[d]=16711935&(a[d]<<8|a[d]>>>24)|4278255360&(a[d]<<24|a[d]>>>8);a[u>>>5]|=128<<u%32,a[14+(u+64>>>9<<4)]=u;var h=s._ff,v=s._gg,y=s._hh,g=s._ii;for(d=0;d<a.length;d+=16){var m=c,w=l,b=f,k=p;c=h(c,l,f,p,a[d+0],7,-680876936),p=h(p,c,l,f,a[d+1],12,-389564586),f=h(f,p,c,l,a[d+2],17,606105819),l=h(l,f,p,c,a[d+3],22,-1044525330),c=h(c,l,f,p,a[d+4],7,-176418897),p=h(p,c,l,f,a[d+5],12,1200080426),f=h(f,p,c,l,a[d+6],17,-1473231341),l=h(l,f,p,c,a[d+7],22,-45705983),c=h(c,l,f,p,a[d+8],7,1770035416),p=h(p,c,l,f,a[d+9],12,-1958414417),f=h(f,p,c,l,a[d+10],17,-42063),l=h(l,f,p,c,a[d+11],22,-1990404162),c=h(c,l,f,p,a[d+12],7,1804603682),p=h(p,c,l,f,a[d+13],12,-40341101),f=h(f,p,c,l,a[d+14],17,-1502002290),c=v(c,l=h(l,f,p,c,a[d+15],22,1236535329),f,p,a[d+1],5,-165796510),p=v(p,c,l,f,a[d+6],9,-1069501632),f=v(f,p,c,l,a[d+11],14,643717713),l=v(l,f,p,c,a[d+0],20,-373897302),c=v(c,l,f,p,a[d+5],5,-701558691),p=v(p,c,l,f,a[d+10],9,38016083),f=v(f,p,c,l,a[d+15],14,-660478335),l=v(l,f,p,c,a[d+4],20,-405537848),c=v(c,l,f,p,a[d+9],5,568446438),p=v(p,c,l,f,a[d+14],9,-1019803690),f=v(f,p,c,l,a[d+3],14,-187363961),l=v(l,f,p,c,a[d+8],20,1163531501),c=v(c,l,f,p,a[d+13],5,-1444681467),p=v(p,c,l,f,a[d+2],9,-51403784),f=v(f,p,c,l,a[d+7],14,1735328473),c=y(c,l=v(l,f,p,c,a[d+12],20,-1926607734),f,p,a[d+5],4,-378558),p=y(p,c,l,f,a[d+8],11,-2022574463),f=y(f,p,c,l,a[d+11],16,1839030562),l=y(l,f,p,c,a[d+14],23,-35309556),c=y(c,l,f,p,a[d+1],4,-1530992060),p=y(p,c,l,f,a[d+4],11,1272893353),f=y(f,p,c,l,a[d+7],16,-155497632),l=y(l,f,p,c,a[d+10],23,-1094730640),c=y(c,l,f,p,a[d+13],4,681279174),p=y(p,c,l,f,a[d+0],11,-358537222),f=y(f,p,c,l,a[d+3],16,-722521979),l=y(l,f,p,c,a[d+6],23,76029189),c=y(c,l,f,p,a[d+9],4,-640364487),p=y(p,c,l,f,a[d+12],11,-421815835),f=y(f,p,c,l,a[d+15],16,530742520),c=g(c,l=y(l,f,p,c,a[d+2],23,-995338651),f,p,a[d+0],6,-198630844),p=g(p,c,l,f,a[d+7],10,1126891415),f=g(f,p,c,l,a[d+14],15,-1416354905),l=g(l,f,p,c,a[d+5],21,-57434055),c=g(c,l,f,p,a[d+12],6,1700485571),p=g(p,c,l,f,a[d+3],10,-1894986606),f=g(f,p,c,l,a[d+10],15,-1051523),l=g(l,f,p,c,a[d+1],21,-2054922799),c=g(c,l,f,p,a[d+8],6,1873313359),p=g(p,c,l,f,a[d+15],10,-30611744),f=g(f,p,c,l,a[d+6],15,-1560198380),l=g(l,f,p,c,a[d+13],21,1309151649),c=g(c,l,f,p,a[d+4],6,-145523070),p=g(p,c,l,f,a[d+11],10,-1120210379),f=g(f,p,c,l,a[d+2],15,718787259),l=g(l,f,p,c,a[d+9],21,-343485551),c=c+m>>>0,l=l+w>>>0,f=f+b>>>0,p=p+k>>>0}return t.endian([c,l,f,p])})._ff=function(e,t,n,r,o,s,i){var a=e+(t&n|~t&r)+(o>>>0)+i;return(a<<s|a>>>32-s)+t},s._gg=function(e,t,n,r,o,s,i){var a=e+(t&r|n&~r)+(o>>>0)+i;return(a<<s|a>>>32-s)+t},s._hh=function(e,t,n,r,o,s,i){var a=e+(t^n^r)+(o>>>0)+i;return(a<<s|a>>>32-s)+t},s._ii=function(e,t,n,r,o,s,i){var a=e+(n^(t|~r))+(o>>>0)+i;return(a<<s|a>>>32-s)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,n){if(null==e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(s(e,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):t.bytesToHex(r)}})),h=function(e){var t=A(e),n=t[0],r=t[1];return 3*(n+r)/4-r},v=function(e){var t,n,r=A(e),o=r[0],s=r[1],i=new w(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),a=0,u=s>0?o-4:o;for(n=0;n<u;n+=4)t=m[e.charCodeAt(n)]<<18|m[e.charCodeAt(n+1)]<<12|m[e.charCodeAt(n+2)]<<6|m[e.charCodeAt(n+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=255&t;2===s&&(t=m[e.charCodeAt(n)]<<2|m[e.charCodeAt(n+1)]>>4,i[a++]=255&t);1===s&&(t=m[e.charCodeAt(n)]<<10|m[e.charCodeAt(n+1)]<<4|m[e.charCodeAt(n+2)]>>2,i[a++]=t>>8&255,i[a++]=255&t);return i},y=function(e){for(var t,n=e.length,r=n%3,o=[],s=16383,i=0,a=n-r;i<a;i+=s)o.push(T(e,i,i+s>a?a:i+s));1===r?(t=e[n-1],o.push(g[t>>2]+g[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(g[t>>10]+g[t>>4&63]+g[t<<2&63]+"="));return o.join("")},g=[],m=[],w="undefined"!=typeof Uint8Array?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=0,S=b.length;k<S;++k)g[k]=b[k],m[b.charCodeAt(k)]=k;function A(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function T(e,t,n){for(var r,o,s=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),s.push(g[(o=r)>>18&63]+g[o>>12&63]+g[o>>6&63]+g[63&o]);return s.join("")}m["-".charCodeAt(0)]=62,m["_".charCodeAt(0)]=63;var j={byteLength:h,toByteArray:v,fromByteArray:y},C=e((function(e,t){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n,r=new Uint8Array(this);void 0===t&&(t=r.length);var o=new ArrayBuffer(t-e),s=new Uint8Array(o);for(n=0;n<s.length;n++)s[n]=r[n+e];return o}),function(t){function n(){}n.prototype.processBlock=function(e){var t,n,r=this.current[0],o=this.current[1],s=this.current[2],i=this.current[3],a=this.current[4],u=[e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63]];for(n=16;n<80;n++)u.push((u[n-3]^u[n-8]^u[n-14]^u[n-16])<<1|(u[n-3]^u[n-8]^u[n-14]^u[n-16])>>>31);for(n=0;n<80;n++)t=(r<<5|r>>>27)+a+u[n],t+=n<20?1518500249+(o&s|~o&i)|0:n<40?1859775393+(o^s^i)|0:n<60?2400959708+(o&s|o&i|s&i)|0:3395469782+(o^s^i)|0,a=i,i=s,s=o<<30|o>>>2,o=r,r=t;this.current[0]+=r,this.current[1]+=o,this.current[2]+=s,this.current[3]+=i,this.current[4]+=a,this.currentLen+=64},n.prototype.doPadding=function(){var e=4294967295&8*(this.inLen+this.currentLen),t=this.inLen<=55?55-this.inLen:119-this.inLen,n=new Uint8Array(new ArrayBuffer(t+1+8));return n[0]=128,n[n.length-1]=255&e,n[n.length-2]=e>>>8&255,n[n.length-3]=e>>>16&255,n[n.length-4]=e>>>24&255,n[n.length-5]=0,n[n.length-6]=0,n[n.length-7]=0,n[n.length-8]=0,n},n.prototype.getDigest=function(){var e=new Uint8Array(new ArrayBuffer(20));return e[3]=255&this.current[0],e[2]=this.current[0]>>>8&255,e[1]=this.current[0]>>>16&255,e[0]=this.current[0]>>>24&255,e[7]=255&this.current[1],e[6]=this.current[1]>>>8&255,e[5]=this.current[1]>>>16&255,e[4]=this.current[1]>>>24&255,e[11]=255&this.current[2],e[10]=this.current[2]>>>8&255,e[9]=this.current[2]>>>16&255,e[8]=this.current[2]>>>24&255,e[15]=255&this.current[3],e[14]=this.current[3]>>>8&255,e[13]=this.current[3]>>>16&255,e[12]=this.current[3]>>>24&255,e[19]=255&this.current[4],e[18]=this.current[4]>>>8&255,e[17]=this.current[4]>>>16&255,e[16]=this.current[4]>>>24&255,e.buffer},n.prototype.reset=function(){this.currentLen=0,this.inLen=0,this.current=new Uint32Array(new ArrayBuffer(20)),this.current[0]=1732584193,this.current[1]=4023233417,this.current[2]=2562383102,this.current[3]=271733878,this.current[4]=3285377520},n.prototype.blockLen=64,n.prototype.digestLen=20;var r=function(e){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer)return new Uint8Array(e);if(e.constructor===String)return function(e){var t,n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}(e);if(e.constructor===Number){if(e>255)throw"For more than one byte, use an array buffer";if(e<0)throw"Input value must be positive";return t=e,n=new ArrayBuffer(1),(r=new Uint8Array(n))[0]=t,r}throw"Unsupported type";var t,n,r},o=function(e){var t=function(e){for(var t=e.length,n=0;t>0;){var r=this.blockLen-this.inLen;r>t&&(r=t);var o=e.subarray(n,n+r);this.inbuf.set(o,this.inLen),n+=r,t-=r,this.inLen+=r,this.inLen===this.blockLen&&(this.processBlock(this.inbuf),this.inLen=0)}},n=function(){var e=this.doPadding();this.update(e);var t=this.getDigest();return this.reset(),t},o=function(){if(!e)throw"Unsupported algorithm: "+e.toString();e.prototype.update=t,e.prototype.finalize=n;var r=new e;return r.inbuf=new Uint8Array(new ArrayBuffer(r.blockLen)),r.reset(),r}();return{update:function(e){o.update(r(e))},finalize:function(){return o.finalize()},digest:function(e){return o.update(r(e)),o.finalize()},reset:function(){o.reset()},digestLength:function(){return o.digestLen}}},s=function(e){var t,n,o,s=!1,i=function(){s=!1,t=void 0,n=void 0,o=void 0,e.reset()};return{setKey:function(i){var a;a=r(i),t=a,function(){var r,i;if(!s){if(void 0===t)throw"MAC key is not defined";for(i=t.byteLength>64?new Uint8Array(e.digest(t)):new Uint8Array(t),n=new Uint8Array(new ArrayBuffer(64)),r=0;r<i.length;r++)n[r]=54^i[r];for(r=i.length;r<64;r++)n[r]=54;for(o=new Uint8Array(new ArrayBuffer(64)),r=0;r<i.length;r++)o[r]=92^i[r];for(r=i.length;r<64;r++)o[r]=92;s=!0,e.update(n.buffer)}}()},update:function(t){e.update(t)},finalize:function(){return t=e.finalize(),e.reset(),e.update(o.buffer),e.update(t),t=e.finalize(),i(),t;var t},mac:function(e){return this.update(e),this.finalize()},reset:function(){i()},hmacLength:function(){return e.digestLength()}}},i={SHA1:function(){return o(n)},HMAC_SHA1:function(){return s(o(n))}};e.exports?e.exports=i:i}()})),L=e((function(e,n){n.__esModule=!0,n.unix=i,n.blobToBuffer=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){var e=new Uint8Array(r.result);t(e)},r.onerror=function(){n(r.error)},r.readAsArrayBuffer(e)}))},n.assertOptions=function(e){var t=e.accessKeyId,n=e.accessKeySecret,r=e.bucket,o=e.endpoint;if(!t)throw new Error("need accessKeyId");if(!n)throw new Error("need accessKeySecret");if(!r&&!o)throw new Error("need bucket or endpoint")},n.getContentMd5=function(e){var t=Array.prototype.slice.call(e,0),n=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e[n]+e[n+1],16));return Uint8Array.from(t)}((0,r.default)(t));return o.default.fromByteArray(n)},n.getCanonicalizedOSSHeaders=a,n.getCanonicalizedResource=u,n.getSignature=function(e){void 0===e&&(e={});var t=e,n=t.type,r=void 0===n?"header":n,c=t.verb,l=void 0===c?"":c,f=t.contentMd5,p=void 0===f?"":f,d=t.expires,h=void 0===d?i()+3600:d,v=t.bucket,y=t.objectName,g=t.accessKeySecret,m=t.headers,w=void 0===m?{}:m,b=t.subResource,k=w["x-oss-date"]||"",S=w["Content-Type"]||"",A=[l,p,S];"header"===r?A.push(k):A.push(h);var T=a(w),j=u(v,y,b);A.push(""+T+j);var C=A.join("\n"),L=new s.default.HMAC_SHA1;L.setKey(g),L.update(C);var O=new Uint8Array(L.finalize());return o.default.fromByteArray(O)};var r=t(d),o=t(j),s=t(C);function i(e){var t,n;return e&&(t=new Date(e)),(n=t)&&"[object Date]"===Object.prototype.toString.call(n)&&"Invalid Date"!==n.toString||(t=new Date),Math.round(t.getTime()/1e3)}function a(e){var t="",n=Object.keys(e);return(n=n.map((function(e){return e.toLowerCase()}))).sort(),n.forEach((function(n){0===n.indexOf("x-oss-")&&(t+=n+":"+e[n]+"\n")})),t}function u(e,t,n){void 0===e&&(e=""),void 0===t&&(t="");var r="";e&&(r+="/"+e),t&&("/"!==t.charAt(0)&&(r+="/"),r+=t);var o=""+r,s="?";if(n){Object.keys(n).sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0})).forEach((function(e){o+=s+e,n[e]&&(o+="="+n[e]),s="&"}))}return o}})),O=e((function(e,n){n.__esModule=!0,n.default=void 0;var r=t(i),o=t(a),s=function(){function e(e){void 0===e&&(e={}),(0,L.assertOptions)(e),this.opts=(0,r.default)({region:"oss-cn-hangzhou",internal:!1,cname:!1,secure:!1,timeout:6e4},e);var t=this.opts,n=t.bucket,o=t.region,s=t.endpoint,i=t.internal;if(this.host="",s)this.host=s;else{var a=n;i&&(a+="-internal"),a+="."+o+".aliyuncs.com",this.host=a}}var t=e.prototype;return t.put=function(e,t,n){var r=this;return void 0===n&&(n={}),new Promise((function(s,i){(0,L.blobToBuffer)(t).then((function(s){var i=r.opts,a=i.accessKeyId,u=i.accessKeySecret,c=i.stsToken,l=i.bucket,f=(0,L.getContentMd5)(s),p={"Content-Md5":f,"Content-Type":t.type,"x-oss-date":(new Date).toGMTString()};c&&(p["x-oss-security-token"]=c);var d=(0,L.getSignature)({verb:"PUT",contentMd5:f,headers:p,bucket:l,objectName:e,accessKeyId:a,accessKeySecret:u});p.Authorization="OSS "+a+":"+d;var h=(r.opts.secure?"https":"http")+"://"+r.host+"/"+e;return(0,o.default)(h,{method:"PUT",headers:p,data:t,timeout:r.opts.timeout,onprogress:n.onprogress})})).then(s).catch(i)}))},t.putSymlink=function(e,t){var n=this.opts,r=n.accessKeyId,s=n.accessKeySecret,i=n.stsToken,a=n.bucket,u={"x-oss-date":(new Date).toGMTString(),"x-oss-symlink-target":encodeURI(t)};i&&(u["x-oss-security-token"]=i);var c=(0,L.getSignature)({verb:"PUT",headers:u,bucket:a,objectName:e,accessKeyId:r,accessKeySecret:s,subResource:{symlink:""}});u.Authorization="OSS "+r+":"+c;var l=(this.opts.secure?"https":"http")+"://"+this.host+"/"+e+"?symlink";return(0,o.default)(l,{method:"PUT",headers:u,timeout:this.opts.timeout})},t.signatureUrl=function(e,t){void 0===t&&(t={});var n=t,r=n.expires,o=void 0===r?1800:r,s=n.method,i=n.process,a=n.response,u=this.opts,c=u.accessKeyId,l=u.accessKeySecret,f=u.stsToken,p=u.bucket,d={},h={};if(i){h["x-oss-process"]=i}a&&Object.keys(a).forEach((function(e){var t="response-"+e.toLowerCase();h[t]=a[e]})),Object.keys(t).forEach((function(e){var n=e.toLowerCase(),r=t[e];0===n.indexOf("x-oss-")?d[n]=r:0===n.indexOf("content-md5")||0===n.indexOf("content-type")?d[e]=r:"expires"!==n&&"response"!==n&&"process"!==n&&"method"!==n&&(h[n]=r)}));var v=t["security-token"]||f;v&&(h["security-token"]=v);var y=(0,L.unix)()+o,g=(0,L.getSignature)({type:"url",verb:s||"GET",accessKeyId:c,accessKeySecret:l,bucket:p,objectName:e,headers:d,subResource:h,expires:y}),m=(this.opts.secure?"https":"http")+"://"+this.host+"/"+e;return m+="?OSSAccessKeyId="+c,m+="&Expires="+y,m+="&Signature="+encodeURIComponent(g),Object.keys(h).forEach((function(e){m+="&"+e+"="+encodeURIComponent(h[e])})),m},e}();n.default=s})).default,x="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),U=new Uint8Array(16);function E(){if(!x)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(U)}var B=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function P(e){return"string"==typeof e&&B.test(e)}for(var I,K,M=[],R=0;R<256;++R)M.push((R+256).toString(16).substr(1));var D=0,_=0;function z(e,t,n){var r=t&&n||0,o=t||new Array(16),s=(e=e||{}).node||I,i=void 0!==e.clockseq?e.clockseq:K;if(null==s||null==i){var a=e.random||(e.rng||E)();null==s&&(s=I=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==i&&(i=K=16383&(a[6]<<8|a[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:_+1,l=u-D+(c-_)/1e4;if(l<0&&void 0===e.clockseq&&(i=i+1&16383),(l<0||u>D)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");D=u,_=c,K=i;var f=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f;var p=u/4294967296*1e4&268435455;o[r++]=p>>>8&255,o[r++]=255&p,o[r++]=p>>>24&15|16,o[r++]=p>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var d=0;d<6;++d)o[r+d]=s[d];return t||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(M[e[t+0]]+M[e[t+1]]+M[e[t+2]]+M[e[t+3]]+"-"+M[e[t+4]]+M[e[t+5]]+"-"+M[e[t+6]]+M[e[t+7]]+"-"+M[e[t+8]]+M[e[t+9]]+"-"+M[e[t+10]]+M[e[t+11]]+M[e[t+12]]+M[e[t+13]]+M[e[t+14]]+M[e[t+15]]).toLowerCase();if(!P(n))throw TypeError("Stringified UUID is invalid");return n}(o)}const N={en:{title:"Pre Convert Demo","step-1":"Step 1: upload your PPT to Ali OSS, get the file URL.","step-2":"Step 2: tell Netless to pre convert the file, get the result URL.","step-3":"Step 3: insert the result into some room.",ref:"Reference.","tip-1":"This page is totally static. We won't store any of your secret data. Go check out","tip-2":"to verify it by yourself.","tip-3":"It uses the library","tip-4":", you can also","tip-5":". Currently our service only supports Aliyun OSS.","tip-6":"Before use, please view","tip-7":"to configure your OSS.","tip-src":"the source code","tip-upload":"upload by yourself","local-gen":"Generate","tip-8":"Tip: get ak, sk from console.netless.link.",gen:"Generate","tip-insert":"Select scene path to be inserted","get-path-list":"Get path list",jump:"Jump"},"zh-CN":{title:"预转码示例","step-1":"第一步：将你的 PPT 上传到阿里云 OSS，获取文件 URL","step-2":"第二步：预转码该文件，获取转换结果 URL","step-3":"第三步：将转换结果插入到某个房间中",ref:"参考文档","tip-1":"本页面纯静态，不会保存您的任何私密信息。您可以查看","tip-2":"来验证这一点","tip-3":"使用了开源库","tip-4":"，您也可以自己","tip-5":"。目前本服务只支持阿里云 OSS","tip-6":"使用前，请参考","tip-7":"配置您的 OSS","tip-src":"源码","tip-upload":"上传","local-gen":"本地生成","tip-8":"提示：在控制台 / 应用管理页获取 AK、SK。",gen:"生成","tip-insert":"选择要插入的场景组","get-path-list":"获取场景组列表",jump:"跳转"}};let H=function(){const e=localStorage.getItem("lang");if(null!=e)return e;const t=navigator.language;for(const e in N)if(t.includes(e))return e;return"en"}();function q(){for(const e of Array.from(document.querySelectorAll("[data-i18n]")))e.textContent=N[H][e.dataset.i18n]??e.textContent??e.dataset.i18n}q();{const e=document.querySelector("#switch-language");e&&e.addEventListener("change",(()=>{var t;(t=e.value)in N&&(H=t,localStorage.setItem("lang",t),q())}))}function F(e){const t=Object.keys(e).sort(),n={};for(const r of t)n[r]=String(e[r]);return n}const $=new TextEncoder("utf-8");const G="0";const J=(V="NETLESSSDK_",async(e,t,n,r)=>{const o={...r,ak:e,nonce:z()};n>0&&(o.expireAt=`${Date.now()+n}`);const s=JSON.stringify(F(o)),i=await async function(e,t){"sha256"===e&&(e="SHA-256");const n=await crypto.subtle.importKey("raw",$.encode(t),{name:"HMAC",hash:e},!0,["sign","verify"]);return{data:"",update(e){return this.data+=e,this},async digest(){const e=$.encode(this.data),t=await crypto.subtle.sign("HMAC",n,e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}}}("sha256",t);o.sig=await i.update(s).digest("hex");const a=(u=F(o),Object.keys(u).map((e=>{const t=u[e];return void 0===t?"":null===t?"null":`${encodeURIComponent(e)}=${encodeURIComponent(t)}`})).join("&"));var u;return V+btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")});var V;window.TinyOSS=O;const W=document,X=e=>W.querySelector(e);function Z(){X("#gen").disabled=!Boolean(X("#ak").value)||!Boolean(X("#sk").value)}function Q(e){return new Promise((t=>{setTimeout(t,e)}))}let Y;function ee(e,t={},...n){const r=document.createElement(e);for(const e in t)r[e]=t[e];return r.append(...n),r}function te(e){X("#result").innerHTML="";let t=0;for(let{width:o,height:s,conversionFileUrl:i,preview:a}of e){"static"===Y&&(a=i);const e=ee("input",{type:"checkbox"});e.dataset.i=String(t),e.id="result-"+t;const u=ee("span",{className:"underline pointer"},"(preview)");function n(){a&&(X("#preview img").src="",X("#preview img").src=a,X("#preview").style.display="")}function r(){a&&(X("#preview").style.display="none")}u.addEventListener("mouseenter",n),u.addEventListener("mousehover",n),u.addEventListener("mouseleave",r);const c=ee("label",{for:e.id,className:"flex relative"},...[ee("span",{className:"flex-auto"},`${i} (${o}x${s})`),a?u:null].filter(Boolean));e.addEventListener("input",(()=>{let t=X("#scenes").value.split("\n");t=t.filter((e=>e!==i)),e.checked&&t.push(i),X("#scenes").value=t.join("\n")})),X("#result").append(e,c),t++}}X("#oss-form").addEventListener("input",(e=>{X("#bucket").value?X("#object").value?(X("#file-url").value="http://"+X("#bucket").value+"."+(X("#region").value||"oss-cn-hangzhou")+".aliyuncs.com/"+X("#object").value,X("#file-url-2").value=X("#file-url").value):X("#file-url").value="missing object":X("#file-url").value="missing bucket"})),X("#oss-form").addEventListener("submit",(e=>{e.preventDefault();const t=X("#object").value,n=X("#file").files[0],r=X("#oss-progress");if(t&&n)try{new O(function(e){const t={};for(const n in e)e[n]&&(t[n]=e[n]);return t}({accessKeyId:X("#accessKeyId").value,accessKeySecret:X("#accessKeySecret").value,stsToken:X("#stsToken").value,region:X("#region").value,bucket:X("#bucket").value})).put(t,n,{onprogress(e){r.value=e.loaded,r.max=e.total}})}catch(e){window.alert("TinyOSS Error: "+e.message),console.error(e)}else window.alert("Please provide object name and file.")})),X("#ak").addEventListener("input",Z),X("#sk").addEventListener("input",Z),X("#gen").addEventListener("click",(async e=>{e.preventDefault();const t=X("#ak").value,n=X("#sk").value,r=X("#ms").value,o=await J(t,n,r,{role:G});X("#sdkToken").value=o})),X("#toggle-modal-gen").addEventListener("click",(e=>{e.preventDefault(),"none"===X("#modal-gen").style.display?X("#modal-gen").style.display="block":X("#modal-gen").style.display="none"})),X("#convert-form").addEventListener("submit",(async e=>{e.preventDefault();const t=X("#sdkToken").value,n=X("#file-url-2").value,r=X("#type").value;if(t&&n)try{!async function({uuid:e,type:t,status:n}){Y=t;const r=X("#sdkToken").value;X("#uuid").textContent=e,X("#status").textContent=n;try{const n=await fetch("https://api.netless.link/v5/tokens/tasks/"+e,{method:"POST",headers:{token:r,"Content-Type":"application/json"},body:JSON.stringify({lifespan:6e5,role:"reader"})}).then((e=>e.json()));let o="Waiting";for(;"Finished"!==o&&"Fail"!==o;){const r=await fetch(`https://api.netless.link/v5/services/conversion/tasks/${e}?type=${t}`,{headers:{token:n,"Content-Type":"application/json"}}).then((e=>e.json()));o=r.status,X("#status").textContent=r.status,X("#step").textContent=r.progress.currentStep;const s=r.progress.convertedPageSize,i=r.progress.totalPageSize;X("#progress").value=s,X("#progress").max=i,te(r.progress.convertedFileList),await Q(1e3)}}catch(e){window.alert("Create task token error: "+e.message),console.error(e)}}(await fetch("https://api.netless.link/v5/services/conversion/tasks",{method:"POST",headers:{token:t,"Content-Type":"application/json"},body:JSON.stringify({resource:n,type:r,preview:!0})}).then((e=>e.json())))}catch(e){window.alert("Convert Error: "+e.message),console.error(e)}else window.alert("Please provite sdk token and file url.")})),X("#fetch-scenes").addEventListener("click",(async e=>{e.preventDefault();const t=X("#roomToken").value,n=X("#roomUuid").value;var r;if(t&&n)try{const e=await fetch("https://api.netless.link/v5/rooms/"+n+"/scenes",{headers:{token:t,"Content-Type":"application/json"}}).then((e=>e.json()));X("#jump-to").innerHTML="",X("#jump-to").append(...e.map((e=>ee("option",{value:e},e))));const o=(r=e.map((e=>{const t=e.split("/");return t.pop(),t.map((e=>e+"/")).join("")})),Array.from(new Set(r)));X("#path").innerHTML="",X("#path").append(...o.map((e=>ee("option",{value:e},e))))}catch(e){window.alert("Fetch scenes error: "+e.message),console.error(e)}else window.alert("Please provide room token and room uuid")})),X("#scenes-form").addEventListener("submit",(async e=>{e.preventDefault();const t=X("#roomToken").value,n=X("#roomUuid").value,r=X("#path").value;if(!t||!n||!r)return void window.alert("Please provide room token and room uuid and path");const o=X("#scenes").value.split("\n").filter(Boolean).map(((e,t)=>({name:z(),ppt:{src:e,width:1024,height:768}})));try{await fetch("https://api.netless.link/v5/rooms/"+n+"/scenes",{method:"POST",headers:{token:t,"Content-Type":"application/json"},body:JSON.stringify({scenes:o,path:r})}).then((e=>e.json())),window.alert("Done.")}catch(e){window.alert("Insert scene error: "+e.message),console.error(e)}})),X("#jump").addEventListener("click",(async e=>{e.preventDefault();const t=X("#roomToken").value,n=X("#roomUuid").value;if(!t||!n)return void window.alert("Please provide room token and room uuid");const r=X("#jump-to").value;if(r)try{await fetch("https://api.netless.link/v5/rooms/"+n+"/scene-state",{method:"PATCH",headers:{token:t,"Content-Type":"application/json"},body:JSON.stringify({scenePath:r})}).then((e=>e.json())),window.alert("Done.")}catch(e){window.alert("Insert scene error: "+e.message),console.error(e)}else window.alert("Please provide jump to tagret")}));
